<!DOCTYPE html>
<html lang="en">
<title>City3D</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="index.css">
<body>
<div class="f4 f1-ns fw4 ma4">City<sup class="h-25 fw1">3d</sup></div>

<div class="flex flex-column ma4 vh-50 vh-75-l overflow-hidden">
    <canvas class="h-inherit" tabindex='1' id="scene"></canvas>
</div>

<script id="vertexShader" type="x-shader/x-vertex">
    #version 300 es
    precision mediump float;
    in vec4 position;
    uniform mat4 mvp;
    uniform int smallPrime;
    uniform int largePrime;

    float scale(float n, float inMin, float inMax, float outMin, float outMax) {
        return (n - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;
    }

    void main() {

        // 1D Index -> 2D Coordinates (+ half offset)
        //float col = float(randomIndex % smallPrime) + 0.5;
        //float row = float(randomIndex) / float(smallPrime) + 0.5;

        // 2D -> 2D Normalized
        //row /= float(smallPrime);
        //col /= float(smallPrime);

        // 2D Normalized -> World
        //float halfOfGrid = float(smallPrime) * 0.5;
        //row = scale(row, 0.0, 1.0, -halfOfGrid, halfOfGrid);
        //col = scale(col, 0.0, 1.0, -halfOfGrid, halfOfGrid);

        int randomIndex = (gl_InstanceID * largePrime) % smallPrime;
        gl_Position = mvp * (vec4(randomIndex, randomIndex, 0, 0) + position);
    }
</script>

<script id="fragmentShader" type="x-shader/x-fragment">
    #version 300 es
    precision mediump float;
    out vec4 outColor;
    void main() {
        outColor = vec4(1, 0, 0, 1);
    }
</script>

</body>
</html>